# Example Comux Session

This is an example of using comux for a real coding task.

```
ğŸš€ Comux - Interactive Coding Assistant
Type 'help' for commands or 'exit' to quit
>>> help

Comux Commands:
  exit, quit    - Exit the session
  help          - Show this help
  clear         - Clear the screen

Usage:
  - Type natural language instructions
  - Use multiline input for complex prompts
  - AI will respond with text or JSON tool calls
  - File operations require confirmation

Environment:
  ZAI_API_KEY   - Your Z.ai API key (required)

>>> Create a simple calculator module that can add, subtract, multiply, and divide

{
  "tool": "write_file",
  "args": {
    "path": "calculator.py",
    "content": "#!/usr/bin/env python3\n\"\"\"\nSimple calculator module with basic arithmetic operations.\n\"\"\"\n\ndef add(a, b):\n    \"\"\"Add two numbers.\"\"\"\n    return a + b\n\ndef subtract(a, b):\n    \"\"\"Subtract b from a.\"\"\"\n    return a - b\n\ndef multiply(a, b):\n    \"\"\"Multiply two numbers.\"\"\"\n    return a * b\n\ndef divide(a, b):\n    \"\"\"Divide a by b.\"\"\"\n    if b == 0:\n        raise ValueError(\"Cannot divide by zero\")\n    return a / b\n\nif __name__ == \"__main__\":\n    # Simple test cases\n    print(f\"2 + 3 = {add(2, 3)}\")\n    print(f\"5 - 2 = {subtract(5, 2)}\")\n    print(f\"4 * 3 = {multiply(4, 3)}\")\n    print(f\"10 / 2 = {divide(10, 2)}\")\n"
  }
}

File written: /path/to/calculator.py

>>> Now create a test file for the calculator

{
  "tool": "write_file",
  "args": {
    "path": "test_calculator.py",
    "content": "#!/usr/bin/env python3\n\"\"\"\nTest cases for calculator module.\n\"\"\"\n\nimport pytest\nfrom calculator import add, subtract, multiply, divide\n\ndef test_add():\n    assert add(2, 3) == 5\n    assert add(-1, 1) == 0\n    assert add(0, 0) == 0\n\ndef test_subtract():\n    assert subtract(5, 2) == 3\n    assert subtract(0, 5) == -5\n    assert subtract(10, 10) == 0\n\ndef test_multiply():\n    assert multiply(3, 4) == 12\n    assert multiply(-2, 3) == -6\n    assert multiply(0, 5) == 0\n\ndef test_divide():\n    assert divide(10, 2) == 5\n    assert divide(6, 3) == 2\n    assert divide(5, 2) == 2.5\n    \ndef test_divide_by_zero():\n    with pytest.raises(ValueError):\n        divide(5, 0)\n\nif __name__ == \"__main__\":\n    pytest.main([__file__])\n"
  }
}

File written: /path/to/test_calculator.py

>>> List the files in the current directory

{
  "tool": "list_files",
  "args": {
    "path": "."
  }
}

ğŸ“„ calculator.py
ğŸ“„ test_calculator.py
ğŸ“„ .comux_session.json
ğŸ“ other_folder

>>> Let me check the calculator module and add exponentiation support

{
  "tool": "read_file",
  "args": {
    "path": "calculator.py"
  }
}

File content:
#!/usr/bin/env python3
"""
Simple calculator module with basic arithmetic operations.
"""

def add(a, b):
    """Add two numbers."""
    return a + b

def subtract(a, b):
    """Subtract b from a."""
    return a - b

def multiply(a, b):
    """Multiply two numbers."""
    return a * b

def divide(a, b):
    """Divide a by b."""
    if b == 0:
        raise ValueError("Cannot divide by zero")
    return a / b

if __name__ == "__main__":
    # Simple test cases
    print(f"2 + 3 = {add(2, 3)}")
    print(f"5 - 2 = {subtract(5, 2)}")
    print(f"4 * 3 = {multiply(4, 3)}")
    print(f"10 / 2 = {divide(10, 2)}")

{
  "tool": "patch_file",
  "args": {
    "path": "calculator.py",
    "patch": "--- a/calculator.py\n+++ b/calculator.py\n@@ -18,6 +18,11 @@\n     if b == 0:\n         raise ValueError(\"Cannot divide by zero\")\n     return a / b\n+\n+def power(base, exponent):\n+    \"\"\"Raise base to the power of exponent.\"\"\"\n+    return base ** exponent\n \n if __name__ == \"__main__\":\n     # Simple test cases\n@@ -25,3 +30,4 @@\n     print(f\"5 - 2 = {subtract(5, 2)}\")\n     print(f\"4 * 3 = {multiply(4, 3)}\")\n     print(f\"10 / 2 = {divide(10, 2)}\")\n+    print(f\"2^3 = {power(2, 3)}\")\n"
  }
}

Proposed changes:
--- a/calculator.py
+++ b/calculator.py
@@ -18,6 +18,11 @@
     if b == 0:
         raise ValueError("Cannot divide by zero")
     return a / b
+
+def power(base, exponent):
+    """Raise base to the power of exponent."""
+    return base ** exponent

 if __name__ == "__main__":
     # Simple test cases
@@ -25,3 +30,4 @@
     print(f"5 - 2 = {subtract(5, 2)}")
     print(f"4 * 3 = {multiply(4, 3)}")
     print(f"10 / 2 = {divide(10, 2)}")
+    print(f"2^3 = {power(2, 3)}")

Apply these changes? [y/N] y

File patched: /path/to/calculator.py

>>> Run the calculator to see the new function

The calculator module has been updated with the power function! You can run it to test:

```bash
python calculator.py
```

This will output:
2 + 3 = 5
5 - 2 = 3
4 * 3 = 12
10 / 2 = 5.0
2^3 = 8

>>> exit

ğŸ‘‹ Session ended
```